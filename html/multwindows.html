<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiple Draggable Windows</title>
<style>
  .window {
    position: absolute;
    width: 200px;
    height: 150px;
    background-color: lightblue;
    border: 1px solid black;
    resize: both;
    overflow: hidden;
  }
  .titlebar {
    width: 100%;
    height: 20px;
    background-color: gray;
    cursor: move;
  }
</style>
</head>
<body>

<!-- Windows will be dynamically created with JavaScript -->

<script>
// Function to create a window element with a random position
function createWindow() {
  var windowElement = document.createElement('div');
  windowElement.className = 'window';
  windowElement.style.left = Math.random() * (window.innerWidth - 200) + 'px'; // Random left position
  windowElement.style.top = Math.random() * (window.innerHeight - 150) + 'px'; // Random top position

  var titlebar = document.createElement('div');
  titlebar.className = 'titlebar';
  titlebar.textContent = 'Window';
  windowElement.appendChild(titlebar);

  return windowElement;
}

// Add multiple windows to the body
var numberOfWindows = 3; // Change this value to adjust the number of windows
for (var i = 0; i < numberOfWindows; i++) {
  var windowElement = createWindow();
  document.body.appendChild(windowElement);
}

// Variables to hold the position of the mouse and the position of the window when dragging starts
var offsetX, offsetY, startX, startY, currentWindow;

// Function to handle the mouse down event
function handleMouseDown(e) {
  currentWindow = this.parentElement; // Get the parent window of the titlebar
  offsetX = e.clientX - currentWindow.offsetLeft;
  offsetY = e.clientY - currentWindow.offsetTop;
  startX = currentWindow.offsetLeft;
  startY = currentWindow.offsetTop;

  // Attach the mousemove and mouseup event listeners
  document.addEventListener('mousemove', handleMouseMove);
  document.addEventListener('mouseup', handleMouseUp);
}

// Function to handle the mouse move event
function handleMouseMove(e) {
  var newLeft = e.clientX - offsetX;
  var newTop = e.clientY - offsetY;
  currentWindow.style.left = newLeft + 'px';
  currentWindow.style.top = newTop + 'px';
}

// Function to handle the mouse up event
function handleMouseUp() {
  // Remove the mousemove and mouseup event listeners
  document.removeEventListener('mousemove', handleMouseMove);
  document.removeEventListener('mouseup', handleMouseUp);
}

// Attach the mousedown event listener to the titlebar of each window
var windowElements = document.querySelectorAll('.window');
windowElements.forEach(function(windowElement) {
  windowElement.querySelector('.titlebar').addEventListener('mousedown', handleMouseDown);
});
</script>

</body>
</html>
